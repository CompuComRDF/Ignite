{
  "Version": "2019-10-30",
  "StartAction": "1996109e-88aa-4db8-bc76-e096abee7768",
  "Metadata": {
    "entryPointPosition": {
      "x": 26.4,
      "y": 72
    },
    "ActionMetadata": {
      "a175b5bf-7fc0-4ebd-be54-2b32f14daba3": {
        "position": {
          "x": 2251.2,
          "y": 452
        }
      },
      "8ccd73d7-5441-4ec9-8c2c-3352c7847478": {
        "position": {
          "x": 2252.8,
          "y": 636.8
        }
      },
      "dc955832-df93-4e16-a404-8970e0114116": {
        "position": {
          "x": 3613.6,
          "y": 471.2
        }
      },
      "16e94047-e070-44aa-bc1d-ef9874e9415e": {
        "position": {
          "x": 1955.2,
          "y": 343.2
        },
        "conditions": [],
        "conditionMetadata": [
          {
            "id": "f385340a-c20f-40de-9757-0e19185d2e8c",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "on"
          }
        ]
      },
      "067bd0a1-3366-4b7d-a5ea-4bb401580a18": {
        "position": {
          "x": 2252,
          "y": 67.2
        }
      },
      "5860774a-987b-4b72-8c6c-4d3b37f7b8bc": {
        "position": {
          "x": 2252,
          "y": 235.2
        }
      },
      "9dd75250-1aa1-4a7f-bf0c-cafa1bcefb5e": {
        "position": {
          "x": 1948.8,
          "y": 45.6
        },
        "conditions": [],
        "conditionMetadata": [
          {
            "id": "e5f363b3-9c07-4d21-bc16-7aa18a5de37e",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "on"
          }
        ]
      },
      "a4f7dd1a-15be-4d10-b53f-8ce1b993f685": {
        "position": {
          "x": 2566.4,
          "y": 67.2
        },
        "parameters": {
          "EventHooks": {
            "CustomerQueue": {
              "useDynamic": true
            }
          }
        },
        "useDynamic": true,
        "customerOrAgent": true
      },
      "cc6ebb7f-4535-412e-8c18-e8f384b4223f": {
        "position": {
          "x": 1697.6,
          "y": 42.4
        },
        "conditions": [],
        "conditionMetadata": [
          {
            "id": "515be6e4-36a8-48e2-bb57-6db54a984d28",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "on"
          }
        ]
      },
      "8ec89265-28c2-4d1c-8b6a-ed07dfb56fea": {
        "position": {
          "x": 1212.8,
          "y": 39.2
        },
        "parameters": {
          "Attributes": {
            "ConnectRDFInitID": {
              "useDynamic": true
            },
            "ConnectRDFPlayID": {
              "useDynamic": true
            },
            "ConnectRDFMainID": {
              "useDynamic": true
            },
            "ConnectRDFLanguagesID": {
              "useDynamic": true
            },
            "ConnectRDFRecordID": {
              "useDynamic": true
            }
          }
        },
        "dynamicParams": [
          "ConnectRDFInitID",
          "ConnectRDFPlayID",
          "ConnectRDFMainID",
          "ConnectRDFLanguagesID",
          "ConnectRDFRecordID"
        ]
      },
      "ab7b5e3d-cb6d-4c0d-a478-0178f0046d49": {
        "position": {
          "x": 2821.6,
          "y": 68
        },
        "parameters": {
          "EventHooks": {
            "AgentWhisper": {
              "useDynamic": true
            }
          }
        },
        "useDynamic": true,
        "customerOrAgent": false
      },
      "bb28fc05-d6b2-4d8f-8a19-3861b9b61f66": {
        "position": {
          "x": 3330.4,
          "y": 74.4
        },
        "parameters": {
          "ContactFlowId": {
            "useDynamic": true
          }
        },
        "useDynamic": true
      },
      "c4190be0-81bb-4002-a453-d48b21c7cae6": {
        "position": {
          "x": 3078.4,
          "y": 69.6
        },
        "parameters": {
          "Attributes": {
            "CPA": {
              "useDynamic": true
            },
            "language": {
              "useDynamic": true
            },
            "session": {
              "useDynamic": true
            }
          }
        },
        "dynamicParams": [
          "CPA",
          "language",
          "session"
        ]
      },
      "9df63eea-6fa3-47e6-bed1-2f1a2602f563": {
        "position": {
          "x": 3338.4,
          "y": 465.6
        }
      },
      "18182367-339d-49f3-b926-3edf0709296f": {
        "position": {
          "x": 922.4,
          "y": 42.4
        },
        "conditions": [],
        "conditionMetadata": [
          {
            "id": "cd8bcea9-cf47-4be6-97ad-0c24da67bddb",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "200"
          }
        ]
      },
      "3e790f10-53f9-4f7f-81ec-83f6a13bf501": {
        "position": {
          "x": 664.8,
          "y": 82.4
        },
        "parameters": {
          "LambdaFunctionARN": {
            "useDynamic": true
          }
        },
        "dynamicMetadata": {
          "function": false
        },
        "useDynamic": true
      },
      "7a07725f-a441-4a90-a029-b3b5c3d70fd3": {
        "position": {
          "x": 438.4,
          "y": 51.2
        }
      },
      "1996109e-88aa-4db8-bc76-e096abee7768": {
        "position": {
          "x": 197.6,
          "y": 52
        },
        "dynamicParams": []
      }
    },
    "Annotations": [],
    "name": "Connect-RDF-Agent",
    "description": "USED BY IGNITE-RDF",
    "type": "queueTransfer",
    "status": "PUBLISHED",
    "hash": {}
  },
  "Actions": [
    {
      "Parameters": {
        "RecordingBehavior": {
          "RecordedParticipants": [
            "Agent",
            "Customer"
          ],
          "IVRRecordingBehavior": "Disabled"
        },
        "AnalyticsBehavior": {
          "Enabled": "True",
          "AnalyticsLanguage": "en-US",
          "AnalyticsRedactionBehavior": "Enabled",
          "AnalyticsRedactionResults": "RedactedAndOriginal",
          "AnalyticsRedactionMaskMode": "PII",
          "ChannelConfiguration": {
            "Chat": {
              "AnalyticsModes": [
                "ContactLens"
              ]
            },
            "Voice": {
              "AnalyticsModes": []
            }
          }
        }
      },
      "Identifier": "a175b5bf-7fc0-4ebd-be54-2b32f14daba3",
      "Type": "UpdateContactRecordingBehavior",
      "Transitions": {
        "NextAction": "a4f7dd1a-15be-4d10-b53f-8ce1b993f685"
      }
    },
    {
      "Parameters": {
        "RecordingBehavior": {
          "RecordedParticipants": [
            "Agent",
            "Customer"
          ],
          "IVRRecordingBehavior": "Disabled"
        },
        "AnalyticsBehavior": {
          "Enabled": "True",
          "AnalyticsLanguage": "en-US",
          "AnalyticsRedactionBehavior": "Disabled",
          "AnalyticsRedactionResults": "RedactedAndOriginal",
          "ChannelConfiguration": {
            "Chat": {
              "AnalyticsModes": []
            },
            "Voice": {
              "AnalyticsModes": [
                "PostContact"
              ]
            }
          }
        }
      },
      "Identifier": "8ccd73d7-5441-4ec9-8c2c-3352c7847478",
      "Type": "UpdateContactRecordingBehavior",
      "Transitions": {
        "NextAction": "a4f7dd1a-15be-4d10-b53f-8ce1b993f685"
      }
    },
    {
      "Parameters": {},
      "Identifier": "dc955832-df93-4e16-a404-8970e0114116",
      "Type": "DisconnectParticipant",
      "Transitions": {}
    },
    {
      "Parameters": {
        "ComparisonValue": "$.External.chatAnalytics"
      },
      "Identifier": "16e94047-e070-44aa-bc1d-ef9874e9415e",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "8ccd73d7-5441-4ec9-8c2c-3352c7847478",
        "Conditions": [
          {
            "NextAction": "a175b5bf-7fc0-4ebd-be54-2b32f14daba3",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "on"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "8ccd73d7-5441-4ec9-8c2c-3352c7847478",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "RecordingBehavior": {
          "RecordedParticipants": [
            "Agent",
            "Customer"
          ],
          "IVRRecordingBehavior": "Disabled"
        },
        "AnalyticsBehavior": {
          "Enabled": "True",
          "AnalyticsLanguage": "en-US",
          "AnalyticsRedactionBehavior": "Enabled",
          "AnalyticsRedactionResults": "RedactedAndOriginal",
          "AnalyticsRedactionMaskMode": "PII",
          "ChannelConfiguration": {
            "Chat": {
              "AnalyticsModes": [
                "ContactLens"
              ]
            },
            "Voice": {
              "AnalyticsModes": [
                "RealTime"
              ]
            }
          }
        }
      },
      "Identifier": "067bd0a1-3366-4b7d-a5ea-4bb401580a18",
      "Type": "UpdateContactRecordingBehavior",
      "Transitions": {
        "NextAction": "a4f7dd1a-15be-4d10-b53f-8ce1b993f685"
      }
    },
    {
      "Parameters": {
        "RecordingBehavior": {
          "RecordedParticipants": [
            "Agent",
            "Customer"
          ],
          "IVRRecordingBehavior": "Disabled"
        },
        "AnalyticsBehavior": {
          "Enabled": "True",
          "AnalyticsLanguage": "en-US",
          "AnalyticsRedactionBehavior": "Enabled",
          "AnalyticsRedactionResults": "RedactedAndOriginal",
          "AnalyticsRedactionMaskMode": "PII",
          "ChannelConfiguration": {
            "Chat": {
              "AnalyticsModes": []
            },
            "Voice": {
              "AnalyticsModes": [
                "PostContact"
              ]
            }
          }
        }
      },
      "Identifier": "5860774a-987b-4b72-8c6c-4d3b37f7b8bc",
      "Type": "UpdateContactRecordingBehavior",
      "Transitions": {
        "NextAction": "a4f7dd1a-15be-4d10-b53f-8ce1b993f685"
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.External.chatAnalytics"
      },
      "Identifier": "9dd75250-1aa1-4a7f-bf0c-cafa1bcefb5e",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "5860774a-987b-4b72-8c6c-4d3b37f7b8bc",
        "Conditions": [
          {
            "NextAction": "067bd0a1-3366-4b7d-a5ea-4bb401580a18",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "on"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "5860774a-987b-4b72-8c6c-4d3b37f7b8bc",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "EventHooks": {
          "CustomerQueue": "$.External.QueueFlowID"
        }
      },
      "Identifier": "a4f7dd1a-15be-4d10-b53f-8ce1b993f685",
      "Type": "UpdateContactEventHooks",
      "Transitions": {
        "NextAction": "ab7b5e3d-cb6d-4c0d-a478-0178f0046d49",
        "Errors": [
          {
            "NextAction": "ab7b5e3d-cb6d-4c0d-a478-0178f0046d49",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.External.speechAnalytics"
      },
      "Identifier": "cc6ebb7f-4535-412e-8c18-e8f384b4223f",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "16e94047-e070-44aa-bc1d-ef9874e9415e",
        "Conditions": [
          {
            "NextAction": "9dd75250-1aa1-4a7f-bf0c-cafa1bcefb5e",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "on"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "16e94047-e070-44aa-bc1d-ef9874e9415e",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "ConnectRDFInitID": "$.External.ConnectRDFInitID",
          "ConnectRDFPlayID": "$.External.ConnectRDFPlayID",
          "ConnectRDFMainID": "$.External.ConnectRDFMainID",
          "ConnectRDFLanguagesID": "$.External.ConnectRDFLanguagesID",
          "ConnectRDFRecordID": "$.External.ConnectRDFRecordID"
        },
        "TargetContact": "Current"
      },
      "Identifier": "8ec89265-28c2-4d1c-8b6a-ed07dfb56fea",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "cc6ebb7f-4535-412e-8c18-e8f384b4223f",
        "Errors": [
          {
            "NextAction": "cc6ebb7f-4535-412e-8c18-e8f384b4223f",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "EventHooks": {
          "AgentWhisper": "$.External.AgentWhisperFlowID"
        },
        "EventHooksConfiguration": {
          "AgentWhisper": {
            "DisableExecution": "false"
          }
        }
      },
      "Identifier": "ab7b5e3d-cb6d-4c0d-a478-0178f0046d49",
      "Type": "UpdateContactEventHooks",
      "Transitions": {
        "NextAction": "c4190be0-81bb-4002-a453-d48b21c7cae6",
        "Errors": [
          {
            "NextAction": "c4190be0-81bb-4002-a453-d48b21c7cae6",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ContactFlowId": "$.Attributes.ConnectRDFMainID"
      },
      "Identifier": "bb28fc05-d6b2-4d8f-8a19-3861b9b61f66",
      "Type": "TransferToFlow",
      "Transitions": {
        "NextAction": "9df63eea-6fa3-47e6-bed1-2f1a2602f563",
        "Errors": [
          {
            "NextAction": "9df63eea-6fa3-47e6-bed1-2f1a2602f563",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "CPA": "$.External.connectFlowType",
          "language": "$.External.language",
          "session": "$.External.session"
        },
        "TargetContact": "Current"
      },
      "Identifier": "c4190be0-81bb-4002-a453-d48b21c7cae6",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "bb28fc05-d6b2-4d8f-8a19-3861b9b61f66",
        "Errors": [
          {
            "NextAction": "bb28fc05-d6b2-4d8f-8a19-3861b9b61f66",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "Sorry.  We are experiencing technical difficulties.  Please try your call again later.  Goodbye."
      },
      "Identifier": "9df63eea-6fa3-47e6-bed1-2f1a2602f563",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "dc955832-df93-4e16-a404-8970e0114116",
        "Errors": [
          {
            "NextAction": "dc955832-df93-4e16-a404-8970e0114116",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.External.statusCode"
      },
      "Identifier": "18182367-339d-49f3-b926-3edf0709296f",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "9df63eea-6fa3-47e6-bed1-2f1a2602f563",
        "Conditions": [
          {
            "NextAction": "8ec89265-28c2-4d1c-8b6a-ed07dfb56fea",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "200"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "9df63eea-6fa3-47e6-bed1-2f1a2602f563",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "LambdaFunctionARN": "$.Attributes.RDF",
        "InvocationTimeLimitSeconds": "8",
        "LambdaInvocationAttributes": {
          "function": "agent"
        },
        "ResponseValidation": {
          "ResponseType": "STRING_MAP"
        }
      },
      "Identifier": "3e790f10-53f9-4f7f-81ec-83f6a13bf501",
      "Type": "InvokeLambdaFunction",
      "Transitions": {
        "NextAction": "18182367-339d-49f3-b926-3edf0709296f",
        "Errors": [
          {
            "NextAction": "9df63eea-6fa3-47e6-bed1-2f1a2602f563",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "FlowLoggingBehavior": "Enabled"
      },
      "Identifier": "7a07725f-a441-4a90-a029-b3b5c3d70fd3",
      "Type": "UpdateFlowLoggingBehavior",
      "Transitions": {
        "NextAction": "3e790f10-53f9-4f7f-81ec-83f6a13bf501"
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "errorMessage": "NA",
          "RDF": "arn:aws:lambda:ca-central-1:577638358850:function:Ignite-RDF:dev",
          "ContactFlowStart": "Connect-RDF-Agent"
        },
        "TargetContact": "Current"
      },
      "Identifier": "1996109e-88aa-4db8-bc76-e096abee7768",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "7a07725f-a441-4a90-a029-b3b5c3d70fd3",
        "Errors": [
          {
            "NextAction": "7a07725f-a441-4a90-a029-b3b5c3d70fd3",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    }
  ]
}