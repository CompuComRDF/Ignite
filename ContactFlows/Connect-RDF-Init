{
  "Version": "2019-10-30",
  "StartAction": "939fda52-68a0-4aab-8607-06a7e1488413",
  "Metadata": {
    "entryPointPosition": {
      "x": 40,
      "y": 40
    },
    "ActionMetadata": {
      "ba358679-4d1a-47b5-a522-7f2c8ca631fd": {
        "position": {
          "x": 1934.4,
          "y": 52.8
        },
        "conditions": [],
        "conditionMetadata": [
          {
            "id": "d027d7cf-7abf-4d7d-b5c5-13fdffb6e19c",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "on"
          }
        ]
      },
      "a8abb7b5-b21a-49b0-9a6c-8663bc32debd": {
        "position": {
          "x": 1939.2,
          "y": 327.2
        },
        "conditions": [],
        "conditionMetadata": [
          {
            "id": "51a76324-4363-43d8-b8ea-263320e1c8d4",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "on"
          }
        ]
      },
      "71098510-199b-473c-8aa1-335902906ac7": {
        "position": {
          "x": 2236,
          "y": 51.2
        }
      },
      "f357de47-4c12-427d-bf05-72a8182c6aee": {
        "position": {
          "x": 2236,
          "y": 219.2
        }
      },
      "2b1dc2f4-2755-403e-812a-b42b46099f6d": {
        "position": {
          "x": 2235.2,
          "y": 436
        }
      },
      "701129cd-16da-44a6-8657-44546072e237": {
        "position": {
          "x": 2236.8,
          "y": 620.8
        }
      },
      "ce43bc0c-45a6-4502-b2b4-2acdc1da3123": {
        "position": {
          "x": 2550.4,
          "y": 51.2
        },
        "parameters": {
          "EventHooks": {
            "CustomerQueue": {
              "useDynamic": true
            }
          }
        },
        "useDynamic": true,
        "customerOrAgent": true
      },
      "9e4cc041-9724-47a9-a09c-87e860f75fb9": {
        "position": {
          "x": 3597.6,
          "y": 455.2
        }
      },
      "5ca57f12-8d47-4d22-af38-ee6f6653f0fd": {
        "position": {
          "x": 1673.6,
          "y": 32
        },
        "conditions": [],
        "conditionMetadata": [
          {
            "id": "6704f46a-348d-4be0-b5db-da3e025f64ee",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "on"
          }
        ]
      },
      "37131a78-f6cd-4cb5-8d32-69f4e60fb7bd": {
        "position": {
          "x": 1441.6,
          "y": 37.6
        },
        "parameters": {
          "FlowModuleId": {
            "useDynamic": true
          }
        },
        "useDynamic": true
      },
      "18810565-9b68-41bc-8db5-f9c74da1ab34": {
        "position": {
          "x": 1196.8,
          "y": 36.8
        },
        "parameters": {
          "Attributes": {
            "ConnectRDFInitID": {
              "useDynamic": true
            },
            "ConnectRDFPlayID": {
              "useDynamic": true
            },
            "ConnectRDFMainID": {
              "useDynamic": true
            },
            "ConnectRDFLanguagesID": {
              "useDynamic": true
            },
            "ConnectRDFRecordID": {
              "useDynamic": true
            }
          }
        },
        "dynamicParams": [
          "ConnectRDFInitID",
          "ConnectRDFPlayID",
          "ConnectRDFMainID",
          "ConnectRDFLanguagesID",
          "ConnectRDFRecordID"
        ]
      },
      "b974fef7-ea56-4ab0-8edf-fb7cac228d55": {
        "position": {
          "x": 2805.6,
          "y": 52
        },
        "parameters": {
          "EventHooks": {
            "AgentWhisper": {
              "useDynamic": true
            }
          }
        },
        "useDynamic": true,
        "customerOrAgent": false
      },
      "a0c9ae70-0ca1-4a8e-9fa0-2986e9034733": {
        "position": {
          "x": 3314.4,
          "y": 58.4
        },
        "parameters": {
          "ContactFlowId": {
            "useDynamic": true
          }
        },
        "useDynamic": true
      },
      "def46fc9-f783-40d4-9fad-cdb954ccd9d9": {
        "position": {
          "x": 3062.4,
          "y": 53.6
        },
        "parameters": {
          "Attributes": {
            "CPA": {
              "useDynamic": true
            },
            "language": {
              "useDynamic": true
            },
            "session": {
              "useDynamic": true
            }
          }
        },
        "dynamicParams": [
          "CPA",
          "language",
          "session"
        ]
      },
      "f283917b-50e5-496a-8014-c56ee78de4ca": {
        "position": {
          "x": 3322.4,
          "y": 449.6
        }
      },
      "03bcb226-c6aa-4c39-bbf0-16e1526e4da4": {
        "position": {
          "x": 916,
          "y": 28
        },
        "conditions": [],
        "conditionMetadata": [
          {
            "id": "e5cf9d17-e4eb-43c1-8b4d-a4cf622d6ef6",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "200"
          }
        ]
      },
      "d64312b2-e4b1-4641-bdcc-6c76dbca9a37": {
        "position": {
          "x": 422.4,
          "y": 35.2
        }
      },
      "514ac0e0-6781-4729-a0b2-73fc339bd86a": {
        "position": {
          "x": 640,
          "y": 33.6
        },
        "parameters": {
          "LambdaFunctionARN": {
            "useDynamic": true
          },
          "LambdaInvocationAttributes": {
            "APPLINK": {
              "useDynamic": true
            }
          }
        },
        "dynamicMetadata": {
          "function": false,
          "APPLINK": true
        },
        "useDynamic": true
      },
      "APPLINK": {
        "position": {
          "x": 168.8,
          "y": 260
        },
        "isFriendlyName": true,
        "parameters": {
          "Attributes": {
            "APPLINK": {
              "useDynamic": true
            }
          }
        },
        "dynamicParams": [
          "APPLINK"
        ]
      },
      "939fda52-68a0-4aab-8607-06a7e1488413": {
        "position": {
          "x": 168.8,
          "y": 39.2
        },
        "parameters": {
          "Attributes": {
            "ANI": {
              "useDynamic": true
            }
          }
        },
        "dynamicParams": [
          "ANI"
        ]
      }
    },
    "Annotations": [],
    "name": "Connect-RDF-Init",
    "description": "USED BY IGNITE-RDF",
    "type": "contactFlow",
    "status": "PUBLISHED",
    "hash": {}
  },
  "Actions": [
    {
      "Parameters": {
        "ComparisonValue": "$.External.chatAnalytics"
      },
      "Identifier": "ba358679-4d1a-47b5-a522-7f2c8ca631fd",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "f357de47-4c12-427d-bf05-72a8182c6aee",
        "Conditions": [
          {
            "NextAction": "71098510-199b-473c-8aa1-335902906ac7",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "on"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "f357de47-4c12-427d-bf05-72a8182c6aee",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.External.chatAnalytics"
      },
      "Identifier": "a8abb7b5-b21a-49b0-9a6c-8663bc32debd",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "701129cd-16da-44a6-8657-44546072e237",
        "Conditions": [
          {
            "NextAction": "2b1dc2f4-2755-403e-812a-b42b46099f6d",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "on"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "701129cd-16da-44a6-8657-44546072e237",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "RecordingBehavior": {
          "RecordedParticipants": [
            "Agent",
            "Customer"
          ]
        },
        "AnalyticsBehavior": {
          "Enabled": "True",
          "AnalyticsLanguage": "en-US",
          "AnalyticsRedactionBehavior": "Enabled",
          "AnalyticsRedactionResults": "RedactedAndOriginal",
          "AnalyticsRedactionMaskMode": "PII",
          "ChannelConfiguration": {
            "Chat": {
              "AnalyticsModes": [
                "ContactLens"
              ]
            },
            "Voice": {
              "AnalyticsModes": [
                "RealTime"
              ]
            }
          }
        }
      },
      "Identifier": "71098510-199b-473c-8aa1-335902906ac7",
      "Type": "UpdateContactRecordingBehavior",
      "Transitions": {
        "NextAction": "ce43bc0c-45a6-4502-b2b4-2acdc1da3123"
      }
    },
    {
      "Parameters": {
        "RecordingBehavior": {
          "RecordedParticipants": [
            "Agent",
            "Customer"
          ]
        },
        "AnalyticsBehavior": {
          "Enabled": "True",
          "AnalyticsLanguage": "en-US",
          "AnalyticsRedactionBehavior": "Enabled",
          "AnalyticsRedactionResults": "RedactedAndOriginal",
          "AnalyticsRedactionMaskMode": "PII",
          "ChannelConfiguration": {
            "Chat": {
              "AnalyticsModes": []
            },
            "Voice": {
              "AnalyticsModes": [
                "PostContact"
              ]
            }
          }
        }
      },
      "Identifier": "f357de47-4c12-427d-bf05-72a8182c6aee",
      "Type": "UpdateContactRecordingBehavior",
      "Transitions": {
        "NextAction": "ce43bc0c-45a6-4502-b2b4-2acdc1da3123"
      }
    },
    {
      "Parameters": {
        "RecordingBehavior": {
          "RecordedParticipants": [
            "Agent",
            "Customer"
          ]
        },
        "AnalyticsBehavior": {
          "Enabled": "True",
          "AnalyticsLanguage": "en-US",
          "AnalyticsRedactionBehavior": "Enabled",
          "AnalyticsRedactionResults": "RedactedAndOriginal",
          "AnalyticsRedactionMaskMode": "PII",
          "ChannelConfiguration": {
            "Chat": {
              "AnalyticsModes": [
                "ContactLens"
              ]
            },
            "Voice": {
              "AnalyticsModes": []
            }
          }
        }
      },
      "Identifier": "2b1dc2f4-2755-403e-812a-b42b46099f6d",
      "Type": "UpdateContactRecordingBehavior",
      "Transitions": {
        "NextAction": "ce43bc0c-45a6-4502-b2b4-2acdc1da3123"
      }
    },
    {
      "Parameters": {
        "RecordingBehavior": {
          "RecordedParticipants": [
            "Agent",
            "Customer"
          ]
        }
      },
      "Identifier": "701129cd-16da-44a6-8657-44546072e237",
      "Type": "UpdateContactRecordingBehavior",
      "Transitions": {
        "NextAction": "ce43bc0c-45a6-4502-b2b4-2acdc1da3123"
      }
    },
    {
      "Parameters": {
        "EventHooks": {
          "CustomerQueue": "$.External.QueueFlowID"
        }
      },
      "Identifier": "ce43bc0c-45a6-4502-b2b4-2acdc1da3123",
      "Type": "UpdateContactEventHooks",
      "Transitions": {
        "NextAction": "b974fef7-ea56-4ab0-8edf-fb7cac228d55",
        "Errors": [
          {
            "NextAction": "b974fef7-ea56-4ab0-8edf-fb7cac228d55",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {},
      "Identifier": "9e4cc041-9724-47a9-a09c-87e860f75fb9",
      "Type": "DisconnectParticipant",
      "Transitions": {}
    },
    {
      "Parameters": {
        "ComparisonValue": "$.External.speechAnalytics"
      },
      "Identifier": "5ca57f12-8d47-4d22-af38-ee6f6653f0fd",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "a8abb7b5-b21a-49b0-9a6c-8663bc32debd",
        "Conditions": [
          {
            "NextAction": "ba358679-4d1a-47b5-a522-7f2c8ca631fd",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "on"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "a8abb7b5-b21a-49b0-9a6c-8663bc32debd",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "FlowModuleId": "$.Attributes.ConnectRDFLanguagesID"
      },
      "Identifier": "37131a78-f6cd-4cb5-8d32-69f4e60fb7bd",
      "Type": "InvokeFlowModule",
      "Transitions": {
        "NextAction": "5ca57f12-8d47-4d22-af38-ee6f6653f0fd",
        "Errors": [
          {
            "NextAction": "f283917b-50e5-496a-8014-c56ee78de4ca",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "ConnectRDFInitID": "$.External.ConnectRDFInitID",
          "ConnectRDFPlayID": "$.External.ConnectRDFPlayID",
          "ConnectRDFMainID": "$.External.ConnectRDFMainID",
          "ConnectRDFLanguagesID": "$.External.ConnectRDFLanguagesID",
          "ConnectRDFRecordID": "$.External.ConnectRDFRecordID"
        },
        "TargetContact": "Current"
      },
      "Identifier": "18810565-9b68-41bc-8db5-f9c74da1ab34",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "37131a78-f6cd-4cb5-8d32-69f4e60fb7bd",
        "Errors": [
          {
            "NextAction": "37131a78-f6cd-4cb5-8d32-69f4e60fb7bd",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "EventHooks": {
          "AgentWhisper": "$.External.AgentWhisperFlowID"
        }
      },
      "Identifier": "b974fef7-ea56-4ab0-8edf-fb7cac228d55",
      "Type": "UpdateContactEventHooks",
      "Transitions": {
        "NextAction": "def46fc9-f783-40d4-9fad-cdb954ccd9d9",
        "Errors": [
          {
            "NextAction": "def46fc9-f783-40d4-9fad-cdb954ccd9d9",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ContactFlowId": "$.Attributes.ConnectRDFMainID"
      },
      "Identifier": "a0c9ae70-0ca1-4a8e-9fa0-2986e9034733",
      "Type": "TransferToFlow",
      "Transitions": {
        "NextAction": "f283917b-50e5-496a-8014-c56ee78de4ca",
        "Errors": [
          {
            "NextAction": "f283917b-50e5-496a-8014-c56ee78de4ca",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "CPA": "$.External.connectFlowType",
          "language": "$.External.language",
          "session": "$.External.session"
        },
        "TargetContact": "Current"
      },
      "Identifier": "def46fc9-f783-40d4-9fad-cdb954ccd9d9",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "a0c9ae70-0ca1-4a8e-9fa0-2986e9034733",
        "Errors": [
          {
            "NextAction": "a0c9ae70-0ca1-4a8e-9fa0-2986e9034733",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "Sorry.  We are experiencing technical difficulties.  Please try your call again later.  Goodbye."
      },
      "Identifier": "f283917b-50e5-496a-8014-c56ee78de4ca",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "9e4cc041-9724-47a9-a09c-87e860f75fb9",
        "Errors": [
          {
            "NextAction": "9e4cc041-9724-47a9-a09c-87e860f75fb9",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.External.statusCode"
      },
      "Identifier": "03bcb226-c6aa-4c39-bbf0-16e1526e4da4",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "f283917b-50e5-496a-8014-c56ee78de4ca",
        "Conditions": [
          {
            "NextAction": "18810565-9b68-41bc-8db5-f9c74da1ab34",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "200"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "f283917b-50e5-496a-8014-c56ee78de4ca",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "FlowLoggingBehavior": "Enabled"
      },
      "Identifier": "d64312b2-e4b1-4641-bdcc-6c76dbca9a37",
      "Type": "UpdateFlowLoggingBehavior",
      "Transitions": {
        "NextAction": "514ac0e0-6781-4729-a0b2-73fc339bd86a"
      }
    },
    {
      "Parameters": {
        "LambdaFunctionARN": "$.Attributes.RDF",
        "InvocationTimeLimitSeconds": "8",
        "LambdaInvocationAttributes": {
          "function": "initialize",
          "APPLINK": "$.Attributes.APPLINK"
        },
        "ResponseValidation": {
          "ResponseType": "STRING_MAP"
        }
      },
      "Identifier": "514ac0e0-6781-4729-a0b2-73fc339bd86a",
      "Type": "InvokeLambdaFunction",
      "Transitions": {
        "NextAction": "03bcb226-c6aa-4c39-bbf0-16e1526e4da4",
        "Errors": [
          {
            "NextAction": "f283917b-50e5-496a-8014-c56ee78de4ca",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "APPLINK": "$.Attributes.blockParam"
        },
        "TargetContact": "Current"
      },
      "Identifier": "APPLINK",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "d64312b2-e4b1-4641-bdcc-6c76dbca9a37",
        "Errors": [
          {
            "NextAction": "d64312b2-e4b1-4641-bdcc-6c76dbca9a37",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "callFlowID": "init",
          "errorMessage": "NA",
          "RDF": "arn:aws:lambda:ca-central-1:577638358850:function:Ignite-RDF:dev",
          "ANI": "$.CustomerEndpoint.Address",
          "ContactFlowStart": "Connect-RDF-Init"
        },
        "TargetContact": "Current"
      },
      "Identifier": "939fda52-68a0-4aab-8607-06a7e1488413",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "APPLINK",
        "Errors": [
          {
            "NextAction": "APPLINK",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    }
  ]
}