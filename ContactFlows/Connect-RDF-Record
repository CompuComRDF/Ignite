{
  "Version": "2019-10-30",
  "StartAction": "Turn on flow logging.",
  "Metadata": {
    "entryPointPosition": {
      "x": -1060,
      "y": -8373.6
    },
    "ActionMetadata": {
      "Turn on flow logging.": {
        "position": {
          "x": -912,
          "y": -8306.4
        },
        "isFriendlyName": true
      },
      "b4c8b352-b7d3-402c-bd79-53512a4e9d7a": {
        "position": {
          "x": -630.4,
          "y": -8307.2
        },
        "parameters": {
          "Attributes": {
            "vmx3_from": {
              "useDynamic": true
            },
            "vmx3_queue_arn": {
              "useDynamic": true
            }
          }
        },
        "dynamicParams": [
          "vmx3_from",
          "vmx3_queue_arn"
        ]
      },
      "9f6409ed-967a-48c4-9518-4eeb63a35d71": {
        "position": {
          "x": -349.6,
          "y": -8303.2
        },
        "toCustomer": false,
        "fromCustomer": true
      },
      "Set the vmx3_flag attribute for processing": {
        "position": {
          "x": -64,
          "y": -8305.6
        },
        "isFriendlyName": true,
        "dynamicParams": []
      },
      "7ef412d6-7afe-479b-ae86-713046883ff5": {
        "position": {
          "x": 1190.4,
          "y": -8301.6
        },
        "parameters": {
          "Attributes": {
            "callFlowID": {
              "useDynamic": true
            }
          }
        },
        "dynamicParams": [
          "callFlowID"
        ]
      },
      "79f97480-cbee-47cd-be80-c9a83710c412": {
        "position": {
          "x": 1497.6,
          "y": -8301.6
        },
        "parameters": {
          "ContactFlowId": {
            "useDynamic": true
          }
        },
        "useDynamic": true
      },
      "da2e51be-2a8e-4826-81fd-8e50b0a63bf8": {
        "position": {
          "x": 1809.6,
          "y": -8294.4
        }
      },
      "Play the start recording beep using SSML": {
        "position": {
          "x": 236,
          "y": -8304
        },
        "isFriendlyName": true
      },
      "0e0c1f4c-685e-4e87-9b1f-a0d265ac96a8": {
        "position": {
          "x": 865.6,
          "y": -8301.6
        }
      },
      "Wait for caller to record.": {
        "position": {
          "x": 552,
          "y": -8306.4
        },
        "isFriendlyName": true,
        "conditionMetadata": []
      }
    },
    "Annotations": [],
    "name": "Connect-RDF-Record",
    "description": "USED BY IGNITE-RDF",
    "type": "contactFlow",
    "status": "PUBLISHED",
    "hash": {}
  },
  "Actions": [
    {
      "Parameters": {
        "FlowLoggingBehavior": "Enabled"
      },
      "Identifier": "Turn on flow logging.",
      "Type": "UpdateFlowLoggingBehavior",
      "Transitions": {
        "NextAction": "b4c8b352-b7d3-402c-bd79-53512a4e9d7a"
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "vmx3_mode": "task",
          "vmx3_lang": "en-US",
          "vmx3_from": "$.CustomerEndpoint.Address",
          "vmx3_queue_arn": "$.Queue.ARN"
        },
        "TargetContact": "Current"
      },
      "Identifier": "b4c8b352-b7d3-402c-bd79-53512a4e9d7a",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "9f6409ed-967a-48c4-9518-4eeb63a35d71",
        "Errors": [
          {
            "NextAction": "9f6409ed-967a-48c4-9518-4eeb63a35d71",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "MediaStreamingState": "Enabled",
        "MediaStreamType": "Audio",
        "Participants": [
          {
            "ParticipantType": "Customer",
            "MediaDirections": [
              "From"
            ]
          }
        ]
      },
      "Identifier": "9f6409ed-967a-48c4-9518-4eeb63a35d71",
      "Type": "UpdateContactMediaStreamingBehavior",
      "Transitions": {
        "NextAction": "Set the vmx3_flag attribute for processing",
        "Errors": [
          {
            "NextAction": "Set the vmx3_flag attribute for processing",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "vmx3_flag": "1"
        },
        "TargetContact": "Current"
      },
      "Identifier": "Set the vmx3_flag attribute for processing",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "Play the start recording beep using SSML",
        "Errors": [
          {
            "NextAction": "Play the start recording beep using SSML",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "callFlowID": "$.Attributes.blockAction"
        },
        "TargetContact": "Current"
      },
      "Identifier": "7ef412d6-7afe-479b-ae86-713046883ff5",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "79f97480-cbee-47cd-be80-c9a83710c412",
        "Errors": [
          {
            "NextAction": "79f97480-cbee-47cd-be80-c9a83710c412",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ContactFlowId": "$.Attributes.ConnectRDFMainID"
      },
      "Identifier": "79f97480-cbee-47cd-be80-c9a83710c412",
      "Type": "TransferToFlow",
      "Transitions": {
        "NextAction": "da2e51be-2a8e-4826-81fd-8e50b0a63bf8",
        "Errors": [
          {
            "NextAction": "da2e51be-2a8e-4826-81fd-8e50b0a63bf8",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {},
      "Identifier": "da2e51be-2a8e-4826-81fd-8e50b0a63bf8",
      "Type": "DisconnectParticipant",
      "Transitions": {}
    },
    {
      "Parameters": {
        "SSML": "<speak>\n  <say-as interpret-as=\"expletive\">beep</say-as>\n</speak>"
      },
      "Identifier": "Play the start recording beep using SSML",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "Wait for caller to record.",
        "Errors": [
          {
            "NextAction": "Wait for caller to record.",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "MediaStreamingState": "Disabled",
        "Participants": [
          {
            "ParticipantType": "Customer",
            "MediaDirections": [
              "To",
              "From"
            ]
          }
        ],
        "MediaStreamType": "Audio"
      },
      "Identifier": "0e0c1f4c-685e-4e87-9b1f-a0d265ac96a8",
      "Type": "UpdateContactMediaStreamingBehavior",
      "Transitions": {
        "NextAction": "7ef412d6-7afe-479b-ae86-713046883ff5",
        "Errors": [
          {
            "NextAction": "7ef412d6-7afe-479b-ae86-713046883ff5",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "StoreInput": "False",
        "InputTimeLimitSeconds": "180",
        "SSML": "<speak>\n<break time=\"5s\"/>\n</speak>"
      },
      "Identifier": "Wait for caller to record.",
      "Type": "GetParticipantInput",
      "Transitions": {
        "NextAction": "0e0c1f4c-685e-4e87-9b1f-a0d265ac96a8",
        "Errors": [
          {
            "NextAction": "0e0c1f4c-685e-4e87-9b1f-a0d265ac96a8",
            "ErrorType": "InputTimeLimitExceeded"
          },
          {
            "NextAction": "0e0c1f4c-685e-4e87-9b1f-a0d265ac96a8",
            "ErrorType": "NoMatchingCondition"
          },
          {
            "NextAction": "0e0c1f4c-685e-4e87-9b1f-a0d265ac96a8",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    }
  ]
}